{"version":3,"sources":["redux/dialogs-reducer.js","api/api.js","assets/images/profile.svg","assets/images/users.svg","assets/images/messages.svg","assets/images/music.svg","assets/images/settings.svg","assets/images/loader.svg","components/Dialogs/Message/Message.js","components/Sidebar/Navbar/navbar.module.css","serviceWorker.js","redux/sidebar-reducer.js","redux/auth-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/Sidebar/Navbar/navbar.js","components/Footer.js","components/News/News.js","components/Music/Music.js","components/Settings/Settings.js","components/Header/Header.jsx","components/Header/HeaderContainer.js","components/Login/Login.js","hoc/withSuspense.js","App.js","index.js","components/common/FormsControls/FormsControls.js","utils/validator/validators.js","components/common/FormsControls/FormsControls.module.css","components/Dialogs/Dialogs.module.css","components/common/preloader/preloader.js","components/Sidebar/Friends/Friends.module.css","components/Header/header.module.css","redux/profile-reducer.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["initialState","messages","id","name","owner","avatar","dialogs","sendMessageCreator","newMessageBody","type","dialogsReducer","state","action","body","newMessage","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","followAPI","userId","post","unfollowAPI","delete","profileAPI","getProfile","getStatus","updateStatus","status","put","savePhoto","photo","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptcha","module","exports","Message","props","c","className","message","src","message_content","Boolean","window","location","hostname","match","sidebarReducer","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","dispatch","a","resultCode","getCaptchaUrl","url","authReducer","initialized","globalError","appReducer","reducers","combineReducers","profilePage","profileReducer","dialogesPage","sidebar","usersPage","usersReducer","auth","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","Navbar","nav","item","to","activeClassName","activeLink","profileSvg","active","messagesSvg","usersSvg","musicSvg","settingsSvg","Footer","News","Music","Settings","Header","header","logo","loginblock","onClick","HeaderContainer","this","React","Component","connect","LoginReduxForm","reduxForm","handleSubmit","error","onSubmit","createField","required","Input","Field","placeholder","component","validate","styles","formSummaryError","console","log","length","stopSubmit","_error","withSuspense","fallback","DialogsContainer","lazy","UsersContainer","ProfileContainer","App","catchAllUnhandledErrors","reason","promise","alert","initializeApp","addEventListener","removeEventListener","path","exact","render","AppContainer","compose","withRouter","SocialApp","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","FormControl","input","meta","child","element","hasError","touched","formControl","children","Textarea","validators","value","maxLengthCreator","maxLength","Preloader","preloader","posts","likesCount","isSaved","addPostActionCreator","newPostText","getUserProfile","getState","file","photos","Promise","reject","newPost","filter","p","postId","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","page","count","totalCount","followUnfollowFlow","apiMethod","actionCreator","follow","bind","unfollow","followed"],"mappings":"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","file":"static/js/main.750aaaf0.chunk.js","sourcesContent":["// const UPDATE_NEW_MESSAGE_BODY = 'UPDATE-NEW-MESSAGE-BODY';\r\nconst SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\nlet initialState={\r\n    messages: [\r\n        {id: 1, name: 'Hi', owner: 0, avatar: 'https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg'},\r\n        {id: 2, name: 'How are you', owner: 0, avatar: 'https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg'},\r\n        {id: 3, name: 'Fine', owner: 1, avatar: 'https://png.pngtree.com/png-clipart/20190920/original/pngtree-cute-chubby-little-dinosaur-png-image_4625217.jpg'},\r\n        {id: 4, name: 'reura', owner: 1, avatar: 'https://png.pngtree.com/png-clipart/20190920/original/pngtree-cute-chubby-little-dinosaur-png-image_4625217.jpg'},\r\n        {id: 5, name: 'Yo', owner: 0, avatar: 'https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg'},\r\n        {id: 6, name: 'Yo',  owner: 1, avatar: 'https://png.pngtree.com/png-clipart/20190920/original/pngtree-cute-chubby-little-dinosaur-png-image_4625217.jpg'}\r\n    ],\r\n    dialogs: [\r\n        {id: 1, name: 'Dima', avatar: 'https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg'},\r\n        {id: 2, name: 'Sasha', avatar: 'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcThuB5b0TO6F40mF3AZ0bvBXpCiwXuJLbTb9W2a_UPBBnh3A7mN&usqp=CAU'},\r\n        {id: 3, name: 'Shura', avatar: 'https://png.pngtree.com/png-clipart/20190920/original/pngtree-cute-chubby-little-dinosaur-png-image_4625217.jpg'},\r\n        {id: 4, name: 'Sveta', avatar: 'https://www.news4jax.com/resizer/b89RYEm5oAgzxJxWIGoyLJ9lZu8=/960x960/smart/filters:format(jpeg):strip_exif(true):strip_icc(true):no_upscale(true):quality(65)/cloudfront-us-east-1.images.arcpublishing.com/gmg/X462YQ4HIJEGHHX2I3LXRV4G7A.jpg'},\r\n        {id: 5, name: 'Dima K', avatar: 'https://cdn.pixabay.com/photo/2016/12/13/16/17/dancer-1904467_960_720.png'}\r\n    ]\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        // case UPDATE_NEW_MESSAGE_BODY:\r\n        //     return {\r\n        //         ...state,\r\n        //         newMessageBody: action.body\r\n        //     }\r\n        case SEND_MESSAGE:\r\n            let body = action.newMessageBody;\r\n            let newMessage = {\r\n                id: 8,\r\n                name: body,\r\n                owner: 1,\r\n                avatar: 'https://png.pngtree.com/png-clipart/20190920/original/pngtree-cute-chubby-little-dinosaur-png-image_4625217.jpg'\r\n            };\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, newMessage]\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody) => ({type: SEND_MESSAGE,newMessageBody})\r\n// export const updateNewMessageBodyCreator = (body) => ({type: UPDATE_NEW_MESSAGE_BODY, body: body})\r\n\r\nexport default dialogsReducer;","import * as axios from \"axios\";\r\n\r\nlet instance = axios.create({\r\n    withCredentials:true,\r\n    baseURL:'https://social-network.samuraijs.com/api/1.0/',\r\n    headers:{\r\n        \"API-KEY\":\"538a19b8-b072-4138-840a-88d1384280f9\"\r\n    }\r\n});\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10){\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`).then(response => {\r\n            return response.data;\r\n        })\r\n    },\r\n    followAPI(userId){\r\n        return instance.post(`follow/${userId}`, {})\r\n    },\r\n    unfollowAPI(userId){\r\n        return instance.delete(`follow/${userId}`, {})\r\n    }\r\n}\r\nexport const profileAPI = {\r\n    getProfile(userId){\r\n        return instance.get('profile/'+userId);\r\n    },\r\n    getStatus(userId){\r\n        return instance.get('profile/status/'+userId);\r\n    },\r\n    updateStatus(status){\r\n        return instance.put('profile/status',{status: status});\r\n    },\r\n    savePhoto(photo){\r\n        var formData = new FormData();\r\n        formData.append(\"image\", photo);\r\n        return instance.put('profile/photo',formData,{\r\n            headers: {\r\n                'Content-type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    saveProfile(profile){\r\n        return instance.put('profile',profile);\r\n    }\r\n}\r\nexport const authAPI = {\r\n    me(){\r\n        return instance.get(`auth/me`);\r\n    },\r\n    login(email,password,rememberMe=false, captcha=null){\r\n        return instance.post(`auth/login`,{email,password,rememberMe,captcha});\r\n    },\r\n    logout(){\r\n        return instance.delete(`auth/login`);\r\n    }\r\n}\r\nexport const securityAPI = {\r\n    getCaptcha(){\r\n        return instance.get(`security/get-captcha-url`);\r\n    }\r\n}\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/profile.f55392a0.svg\";","module.exports = __webpack_public_path__ + \"static/media/users.615ddc1a.svg\";","module.exports = __webpack_public_path__ + \"static/media/messages.e56ebb9d.svg\";","module.exports = __webpack_public_path__ + \"static/media/music.8dc72a98.svg\";","module.exports = __webpack_public_path__ + \"static/media/settings.a163fc2a.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader.a595047a.svg\";","import React from \"react\";\r\nimport c from './../Dialogs.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Message = (props) => {\r\n let owner = props.state.owner ? c.owner : '';\r\n\r\n return(\r\n     <div className={c.message}>\r\n         <div className={owner}>\r\n            <img className=\"avatar\" src={props.state.avatar}/>\r\n            <div className={c.message_content}> <span>{props.state.name}</span></div>\r\n         </div>\r\n     </div>\r\n )\r\n}\r\n\r\nexport default Message;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"navbar_item__3yJF-\",\"activeLink\":\"navbar_activeLink__2I4mJ\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const sidebarReducer = (state, action) => {\r\n    return '';\r\n}\r\n\r\nexport default sidebarReducer;","import {authAPI, securityAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\"\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'auth/GET_CAPTCHA_URL_SUCCESS';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {...state, ...action.payload};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({\r\n    type: SET_USER_DATA,\r\n    payload: {userId, email, login, isAuth}\r\n})\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    payload: {captchaUrl}\r\n})\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let response = await authAPI.me();\r\n    if (response.data.resultCode === 0) {\r\n        let {id, email, login} = response.data.data;\r\n        dispatch(setAuthUserData(id, email, login, true))\r\n    }\r\n}\r\n\r\nexport const login = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe, captcha);\r\n    console.log(response.data.resultCode)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData())\r\n    }  else {\r\n        if(response.data.resultCode === 10){\r\n            dispatch(getCaptchaUrl());\r\n        }\r\n        else {\r\n            let message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n            dispatch(stopSubmit(\"login\", {_error: message}));\r\n        }\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    let response = await securityAPI.getCaptcha();\r\n    const captchaUrl = response.data.url;\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport const logout = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData(setAuthUserData(null, null, null, false)))\r\n    }\r\n}\r\n\r\nexport default authReducer;","import {authAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\"\r\nimport {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState={\r\n    initialized:false,\r\n    globalError:null\r\n}\r\n\r\nconst appReducer = (state=initialState, action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return  {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setInitializedSuccess = () => ({type: INITIALIZED_SUCCESS})\r\n\r\nexport const initializeApp = () => (dispatch) =>{\r\n    let promise = dispatch(getAuthUserData())\r\n    promise.then(()=>\r\n        dispatch(setInitializedSuccess())\r\n    )\r\n\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\";\r\nimport appReducer from \"./app-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogesPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\nlet store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import React from \"react\";\r\nimport c from './navbar.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport profileSvg from './../../../assets/images/profile.svg';\r\nimport usersSvg from './../../../assets/images/users.svg';\r\nimport messagesSvg from './../../../assets/images/messages.svg';\r\nimport musicSvg from './../../../assets/images/music.svg';\r\nimport settingsSvg from './../../../assets/images/settings.svg';\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={c.nav}>\r\n            <div className={c.item}>\r\n                <NavLink to='/profile' activeClassName={c.activeLink}><img src={profileSvg} />Profile</NavLink>\r\n            </div>\r\n            <div className={`${c.item} ${c.active}`}>\r\n                <NavLink to='/dialogs' activeClassName={c.activeLink}><img src={messagesSvg} />Messages</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to='/users' activeClassName={c.activeLink}><img src={usersSvg} />Users</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to='/music' activeClassName={c.activeLink}><img src={musicSvg} />Music</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to='/settings' activeClassName={c.activeLink}><img src={settingsSvg} />Settings</NavLink>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\nexport default Navbar;","import React from \"react\";\r\n\r\nconst Footer = () => {\r\n    return <footer className='footer'></footer>\r\n}\r\nexport default Footer;","import React from \"react\";\r\nimport c from './News.module.css';\r\n\r\n\r\nconst News = (props) => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","import React from \"react\";\r\nimport c from './Music.module.css';\r\n\r\n\r\nconst Music = (props) => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","import React from \"react\";\r\nimport c from './Settings.module.css';\r\n\r\n\r\nconst Settings = (props) => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport c from './header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Header = (props) => {\r\n    return <header className={c.header}>\r\n        {/*<img src='https://image.shutterstock.com/image-vector/dots-letter-c-logo-design-260nw-551769190.jpg'/>*/}\r\n        <NavLink className={c.logo} to='/'>SN</NavLink>\r\n        <div className={c.loginblock}>\r\n            {props.isAuth\r\n                ? <div>{props.login} - <button onClick={props.logout}>Logout</button></div>\r\n                : <NavLink to='/login'>Login</NavLink>}\r\n        </div>\r\n    </header>\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass HeaderContainer extends React.Component{\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\nconst mathStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n});\r\n\r\nexport default connect(mathStateToProps,{logout})(HeaderContainer);","import React from \"react\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {createField, Input} from \"../common/FormsControls/FormsControls\";\r\nimport {required} from \"../../utils/validator/validators\";\r\nimport {connect} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport styles from \"../common/FormsControls/FormsControls.module.css\"\r\n\r\nconst LoginForm = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField(\"Login\",\"email\",[required],Input)}\r\n            <div><Field placeholder={\"Password\"} name={\"password\"} type={\"password\"} component={Input} validate={[required]}/></div>\r\n            <div><Field component={\"input\"} name={\"rememberMe\"} type={\"checkbox\"}/>remember me</div>\r\n            {captchaUrl && <img src={captchaUrl}/>}\r\n            {captchaUrl && createField(\"Symbols from image\",\"captcha\",[required],Input)}\r\n            {error && <div className={styles.formSummaryError}>{error}</div>}\r\n            <div><button>Login</button></div>\r\n        </form>\r\n    )\r\n}\r\nconst LoginReduxForm = reduxForm({form: 'login'})(LoginForm)\r\n\r\nconst Login = (props) => {\r\n    const onSubmit = (formData) => {\r\n        props.login(formData.email,formData.password,formData.rememberMe, formData.captcha)\r\n    }\r\n\r\n    if(props.isAuth){\r\n        return <Redirect to={\"/profile\"} />\r\n    }\r\n\r\n    return <div>\r\n        <h1>Login</h1>\r\n        <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captchaUrl: state.auth.captchaUrl\r\n})\r\n\r\nexport default connect(mapStateToProps,{login})(Login);","import React, {Component, Suspense} from \"react\";\r\nimport Preloader from \"../components/common/preloader/preloader\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <Suspense fallback={<Preloader />}>\r\n            <Component />\r\n        </Suspense>\r\n    }\r\n}","import React from 'react';\nimport './App.css';\nimport Navbar from \"./components/Sidebar/Navbar/navbar\";\nimport Footer from \"./components/Footer\";\nimport {BrowserRouter, Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport News from \"./components/News/News\";\nimport Music from \"./components/Music/Music\";\nimport Settings from \"./components/Settings/Settings\";\nimport Friends from \"./components/Sidebar/Friends/Friends\";\n\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\nimport LoginPage from \"./components/Login/Login\";\nimport {connect, Provider} from \"react-redux\";\nimport {compose} from \"redux\";\nimport {initializeApp} from \"./redux/app-reducer\";\nimport Preloader from \"./components/common/preloader/preloader\";\nimport store from \"./redux/redux-store\";\nimport {withSuspense} from \"./hoc/withSuspense\";\n\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"))\nconst UsersContainer = React.lazy(() => import(\"./components/Users/UsersContainer\"))\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"))\n\nclass App extends React.Component {\n    catchAllUnhandledErrors = (reason,promise) => {\n        alert('error')\n    }\n    componentDidMount() {\n        this.props.initializeApp();\n        window.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors)\n    }\n    componentWillUnmount() {\n        window.removeEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors)\n    }\n\n    render() {\n        if (!this.props.initialized)\n            return <Preloader/>\n\n        return (\n            <div className='app-wrapper'>\n                <HeaderContainer/>\n                <div className=\"sidebar\">\n                    <Navbar/>\n                    {/*<Friends state={props.store.getState().sidebar}/>*/}\n                </div>\n                <div className='app-wrapper-content'>\n                    <Switch>\n                        <Route path='/' exact><Redirect to='/profile'/></Route>\n                        <Route path='/dialogs' render={withSuspense(DialogsContainer)}/>\n                        <Route path='/profile/:userId?' render={withSuspense(ProfileContainer)}/>\n                        <Route path='/users' render={withSuspense(UsersContainer)}/>\n                        <Route path='/login' render={() => <LoginPage/>}/>\n                        <Route path='/news' component={News}/>\n                        <Route path='/music' component={Music}/>\n                        <Route path='/settings' component={Settings}/>\n                        <Route path='*' render={() => <div>404</div>}/>\n                    </Switch>\n                </div>\n                <Footer/>\n            </div>\n        );\n    }\n}\n\nconst mathStateToProps = (state) => ({\n    initialized: state.app.initialized\n});\n\nlet AppContainer = compose(\n    withRouter,\n    connect(mathStateToProps, {initializeApp})\n)(App);\n\nlet SocialApp = (props) => {\n    // basename={process.env.PUBLIC_URL}\n    return <BrowserRouter>\n        <Provider store={store}>\n            <AppContainer/>\n        </Provider>\n    </BrowserRouter>\n}\n\nexport default SocialApp;","import React from 'react';\nimport * as serviceWorker from './serviceWorker';\nimport store from \"./redux/redux-store\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport SocialApp from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <SocialApp />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\r\nimport styles from \"./FormsControls.module.css\";\r\nimport {required} from \"../../../utils/validator/validators\";\r\nimport {Field} from \"redux-form\";\r\n\r\nexport const FormControl = ({input, meta, child, element, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError && styles.error)}>\r\n            {props.children}\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, children, element, ...restProps} = props\r\n    return (<FormControl {...props}><textarea {...input} {...props}/></FormControl>)\r\n}\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, children, element, ...restProps} = props\r\n    return (<FormControl {...props}><input {...input} {...props}/></FormControl>)\r\n}\r\n\r\nexport const createField = (placeholder, name, validators, component, props) => {\r\n    return <div>\r\n        <Field placeholder={placeholder} name={name} component={component} validate={validators} props={props}/>\r\n    </div>\r\n}","export const required = value => {\r\n    if(value) return undefined;\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if(value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n    return undefined;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-control\":\"FormsControls_form-control__2yjye\",\"formControl\":\"FormsControls_formControl__3pmeh\",\"error\":\"FormsControls_error__1QK6a\",\"formSummaryError\":\"FormsControls_formSummaryError__3u9-d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1abV9\",\"dialogItems\":\"Dialogs_dialogItems__1i5Fn\",\"active\":\"Dialogs_active__2WPEU\",\"dialog\":\"Dialogs_dialog__31an4\",\"messages\":\"Dialogs_messages__XK_9B\",\"message\":\"Dialogs_message__1upX-\",\"owner\":\"Dialogs_owner__3KU4O\",\"message_content\":\"Dialogs_message_content__2Kw8o\"};","import preloader from \"../../../assets/images/loader.svg\";\r\nimport React from \"react\";\r\n\r\nlet Preloader = (props) => {\r\n    return <img src={preloader}/>\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friends\":\"Friends_friends__RVs3C\",\"friend\":\"Friends_friend__3h0uh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2Pgzs\",\"loginblock\":\"header_loginblock__jLCW7\",\"logo\":\"header_logo__3mhQK\"};","import {authAPI, profileAPI, usersAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SAVE_PHOTO = 'SAVE_PHOTO';\r\nconst SAVE_PROFILE = 'SAVE_PROFILE';\r\nconst IS_SAVED = 'IS_SAVED';\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, name: 'What\\'s up', likesCount: 20},\r\n        {id: 2, name: 'It\\'s my first post', likesCount: 28},\r\n        {id: 3, name: 'Hello', likesCount: 9},\r\n        {id: 4, name: 'Its me', likesCount: 786}\r\n    ],\r\n    profile: null,\r\n    status: '',\r\n    isSaved: true\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST:{\r\n            let newPost = {id: 6, name: action.newPostText, likesCount: 0};\r\n            return {...state, posts: [...state.posts, newPost]};\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {...state, profile: action.profile};\r\n        }\r\n        case SET_STATUS: {\r\n            return {...state, status: action.status};\r\n        }\r\n        case DELETE_POST: {\r\n            return {...state, posts: state.posts.filter(p => p.id != action.postId)};\r\n        }\r\n        case SAVE_PHOTO: {\r\n            return {...state, profile: {...state.profile, photos: action.photos}};\r\n        }\r\n        case IS_SAVED: {\r\n            return {...state, isSaved: action.isSaved};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreator = (newPostText) => ({type: ADD_POST, newPostText})\r\nexport const deletePostActionCreator = (postId) => ({type: DELETE_POST, postId})\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nexport const setStatus = (status) => ({type: SET_STATUS, status})\r\nexport const savePhotoSuccess = (photos) => ({type: SAVE_PHOTO, photos})\r\nexport const profileWithoutError = (isSaved) => ({type: IS_SAVED, isSaved})\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data));\r\n}\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(response.data));\r\n}\r\nexport const updateStatus = (status) => async (dispatch, getState) => {\r\n    try{\r\n        const userId = getState().auth.userId;\r\n        let response = await profileAPI.updateStatus(status);\r\n        if (response.data.resultCode === 0)\r\n            dispatch(getStatus(userId));\r\n    } catch(error){\r\n        let response = await profileAPI.updateStatus(status);\r\n        console.log(response);\r\n    }\r\n\r\n}\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n    if (response.resultCode === 0)\r\n        dispatch(savePhotoSuccess(response.data.photos));\r\n}\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId\r\n    let response = await profileAPI.saveProfile(profile);\r\n    if (response.data.resultCode === 0){\r\n        // dispatch(profileWithoutError(true))\r\n        dispatch(getUserProfile(userId));\r\n    } else {\r\n        // dispatch(profileWithoutError(false))\r\n        dispatch(stopSubmit(\"edit-profile\", {_error: response.data.messages[0]}));\r\n        return Promise.reject(response.data.messages[0]);\r\n    }\r\n}\r\n\r\nexport default profileReducer;","\r\nexport const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    })\r\n}","import {authAPI, usersAPI} from \"../api/api\";\r\nimport {updateObjectInArray} from \"../utils/object-helpers\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 20,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n            };\r\n        case UNFOLLOW: {\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n                // users: state.users.map(u => {\r\n                //     if (u.id === action.userID) {\r\n                //         return {...u, followed: false}\r\n                //     }\r\n                //     return u;\r\n                // })\r\n            };\r\n        }\r\n        case SET_USERS:\r\n            return {\r\n                ...state, users: action.users\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state, currentPage: action.currentPage\r\n            }\r\n        case SET_USERS_TOTAL_COUNT:\r\n            return {\r\n                ...state, totalUsersCount: action.count\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state, isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id != action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId) => ({type: FOLLOW, userId})\r\nexport const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\r\nexport const setTotalUsersCount = (count) => ({type: SET_USERS_TOTAL_COUNT, count})\r\nexport const toggleIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching})\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({\r\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId\r\n})\r\n\r\nexport const getUsers = (page, pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true))\r\n        dispatch(setCurrentPage(page))\r\n        let data = await usersAPI.getUsers(page, pageSize);\r\n        dispatch(toggleIsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setTotalUsersCount(data.totalCount))\r\n    }\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgress(true, userId))\r\n    let response = await apiMethod(userId);\r\n    if (response.data.resultCode == 0) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.followAPI.bind(usersAPI),followSuccess);\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.unfollowAPI.bind(usersAPI),unfollowSuccess);\r\n    }\r\n}\r\n\r\nexport default usersReducer;"],"sourceRoot":""}